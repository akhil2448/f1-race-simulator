<div class="leaderboard-panel">
  <div class="leaderboard-header">
    <div class="f1-logo-bw">
      <svg
        viewBox="0 0 320 80"
        xmlns="http://www.w3.org/2000/svg"
        class="f1-logo"
        aria-label="F1 Logo"
      >
        <path
          fill="currentColor"
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M45.2583 80L80.7417 45.575H80.7333C94.7167 32.0167 100.392 29.9583 127.058 29.9583H233.408L264.008 0H123.025C87.3333 0 77.2417 3.4 56.3083 24.1167L0 80H45.2583ZM127.7 34.7417H228.842L200.792 62.7917H128.225C114.925 62.7917 111.983 63.4167 105.383 70.0167L95.4 80H53.4333L84.4583 48.975C96.6417 36.8 100.842 34.7417 127.7 34.7417ZM320 0L239.783 80H190.175L270.175 0H320Z"
        />
      </svg>
    </div>

    <hr />

    <div class="lap-indicator">
      <span class="lap-label">LAP</span>
      <span class="lap-current">{{ leaderLap }}</span>
      <span class="lap-separator">/</span>
      <span class="lap-total">{{ totalLaps }}</span>
    </div>

    <div class="track-status">
      <app-track-status />
    </div>
  </div>

  <div class="leaderboard">
    <!-- ðŸ”’ HIDE ENTIRE BOARD WHEN REQUIRED -->
    <div class="leaderboard-body" *ngIf="!hideLeaderboard">
      <div
        #driverRow
        class="driver-row"
        *ngFor="let row of leaderboard; trackBy: trackByDriver"
        [attr.data-driver]="row.driver"
        [class.out]="row.status === 'OUT'"
      >
        <!-- POSITION -->
        <div
          class="position"
          [class.provisional-up]="row.provisional === 'UP'"
          [class.provisional-down]="row.provisional === 'DOWN'"
        >
          <span class="pos-number">{{ row.position }}</span>

          <span
            *ngIf="row.positionArrow"
            class="pos-arrow"
            [class.up]="row.positionArrow === 'up'"
            [class.down]="row.positionArrow === 'down'"
          ></span>
        </div>

        <!-- TEAM -->
        <div class="team-icon">
          <img
            [src]="'assets/team-logos/' + getDriverTeam(row.driver) + '.svg'"
            alt="team-logo"
            [class]="getDriverTeam(row.driver)"
            (error)="onTeamLogoError($event)"
          />
        </div>

        <div
          class="driver-color"
          [style.background]="getDriverColor(row.driver)"
        ></div>

        <div class="driver-code">{{ row.driver }}</div>

        <!-- STATS -->
        <div
          class="driver-stats"
          [ngClass]="{
            'toggle-mode': showTyres || showPitStops,
            'in-pit': row.isInPit,
          }"
          [style.color]="row.isInPit ? getDriverColor(row.driver) : null"
        >
          <!-- GAP MODE -->
          <ng-container *ngIf="!showTyres && !showPitStops">
            <span *ngIf="row.status === 'OUT'">OUT</span>

            <span *ngIf="row.status !== 'OUT'">
              {{
                useLeaderGapMode ? formatLeaderGap(row) : formatIntervalGap(row)
              }}
            </span>
          </ng-container>

          <!-- TYRE MODE -->
          <ng-container *ngIf="showTyres">
            {{ row.status === "OUT" ? "â€“" : (row.tyreLife ?? "â€“") }}
          </ng-container>

          <!-- PIT MODE -->
          <ng-container *ngIf="showPitStops">
            {{ row.status === "OUT" ? "â€“" : row.pitStops }}
          </ng-container>
        </div>

        <div class="tyre" [ngClass]="row.compound.toLowerCase()">
          {{ row.compound[0] }}
        </div>
      </div>
    </div>
  </div>
</div>

<div>
  <button class="tyre-toggle" (click)="showTyreLife()">TYRE</button>
</div>
<button class="pit-toggle" (click)="showPitStopsTemporarily()">PIT</button>
